@model IEnumerable<ShopMVC.Data2.Product>

@{
	ViewData["Title"] = "Product Profit Ranking";
	var rank = 1;
}

<style>
	.rank-gold {
		background-color: gold;
		color: black;
	}

	.rank-silver {
		background-color: silver;
		color: black;
	}

	.rank-bronze {
		background-color: sandybrown;
		color: black;
	}

	.rank-number {
		font-weight: bold;
		font-size: 1.5em;
	}

	.img-container {
		display: flex;
		justify-content: center;
		align-items: center;
	}

		.img-container img {
			width: 80px;
			height: 80px;
			border-radius: 50%;
		}
</style>
@if (Context.User.Identity.IsAuthenticated && Context.User.IsInRole("1"))
{
	<div class="container py-5">
		<h1 class="mb-4 text-center">Product Profit Ranking</h1>
		<div class="table-responsive">
			<table class="table table-striped table-hover">
				<thead class="thead-dark">
					<tr>
						<th scope="col">Rank</th>
						<th scope="col">Product</th>
						<th scope="col">Name</th>
						<th scope="col">Category</th>
						<th scope="col">Unit Price</th>
						<th scope="col">Quantity Sold</th>
						<th scope="col">Profit</th>
					</tr>
				</thead>
				<tbody>
					@foreach (var product in Model)
					{
						var rankClass = rank == 1 ? "rank-gold" : rank == 2 ? "rank-silver" : rank == 3 ? "rank-bronze" : "";
						<tr class="@rankClass">
							<td class="align-middle rank-number">@rank</td>
							<td class="align-middle img-container">
								<img src="~/Image/Product/@product.Image" alt="@product.ProductName">
							</td>
							<td class="align-middle">@product.ProductName</td>
							<td class="align-middle">@product.Category?.CategoryName</td>
							<td class="align-middle">$@product.UnitPrice?.ToString("0.00")</td>
							<td class="align-middle">@product.QuantitySold</td>
							<td class="align-middle">$@product.Profit?.ToString("0.00")</td>
						</tr>
						rank++;
					}
				</tbody>
			</table>
		</div>
	</div>
}

else
{
	@await Html.PartialAsync("_AuthorizeScreen")

}